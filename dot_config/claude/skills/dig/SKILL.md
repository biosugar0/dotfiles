---
name: dig
description: Spec/planの曖昧点を構造化質問で明確化し、意思決定をプランへ反映する。曖昧点整理、詳細詰め、要件確認、仕様の不明点洗い出し、planの確認で自動発動。
allowed-tools:
  - Read
  - Grep
  - Glob
  - Write
  - Edit
  - TodoRead
  - TodoWrite
  - AskUserQuestion
user-invocable: true
---

planファイルを読み、AskUserQuestionで詳細なインタビューを実施。

## 対象
- Product Spec
- 技術詳細
- UI/UX
- その他すべての曖昧点

## フェーズ

1. **曖昧点の特定** - プランを読み、不明確な箇所をリストアップ
2. **質問生成** - AskUserQuestionToolで具体的な選択肢を提示
3. **決定の適用** - 回答をプランに反映
4. **サマリー表示** - 決定事項を一覧化

フェーズ3の後、再度プランを分析し、未解決の曖昧点があればフェーズ2に戻る（最大50回まで）。

## 質問ルール

- 質問数: **2-4問** (曖昧度に応じて調整)
- 各質問に **2-4個の具体的選択肢**
- 各選択肢に **メリット/デメリット**を簡潔に記載
- オープンエンドな質問は避ける
- 「その他」は自動追加されるため含めない
- CLAUDE.mdのパターンに合わせる

## 出力フォーマット

回答受領後:

```markdown
## 決定事項

| 項目 | 選択 | 理由 | 備考 |
|------|------|------|------|
| データ保存 | Database | スケーラビリティ | 移行戦略を検討 |

## 次のステップ

1. **タスク1**
   - 詳細...
2. **タスク2**
   - 詳細...
```

## 注意

- **AskUserQuestionToolを必ず使用** - 会話形式での質問は禁止
- multiSelectは控えめに (デフォルト: false)
- 質問前にCLAUDE.mdを確認し、プロジェクトパターンに合わせる
