---
description: Specファイルを読み、詳細なインタビューを通じて要件を深掘りし、完成したspecを書き出す
argument-hint: [spec-file-path]
---

# Spec Interview

指定されたSpecファイルを読み、AskUserQuestionToolを使って詳細なインタビューを実施する。

## 入力

$ARGUMENTS

- 引数あり: 指定されたファイルを読み込む
- 引数なし: インタビューのみ実施（新規spec作成）

## 出力先

完成したspecは **`~/.config/claude/plans/`** に保存:
- ファイル名: `YYYY-MM-DD-[機能名のslug].md`
- 例: `2025-01-15-user-auth-flow.md`

この場所は全プロジェクト共有。実装時に参照可能。

## インタビュー方針

### 深掘りすべき観点
- **技術実装**: アーキテクチャ、データフロー、依存関係、エラーハンドリング
- **UI/UX**: ユーザーフロー、状態遷移、フィードバック、アクセシビリティ
- **エッジケース**: 異常系、境界値、同時実行、リトライ
- **トレードオフ**: パフォーマンス vs 可読性、柔軟性 vs シンプルさ
- **運用**: ログ、監視、デバッグ、ロールバック
- **セキュリティ**: 認証、認可、入力検証、データ保護

### 質問のルール
- **自明な質問は避ける** - specに明記されていることは聞かない
- **本質的な問いに集中** - 実装時に判断が必要になるポイントを特定
- **具体的なシナリオで確認** - 抽象的な質問より具体例で
- **トレードオフを提示** - 選択肢とその影響を明確に

## プロセス

1. **Specファイルを読む**
   - 現在の内容を完全に理解
   - 不足している情報、曖昧な箇所を特定

2. **インタビュー実施**
   - AskUserQuestionToolを使用（1回1-4問）
   - 回答を受けて次の深掘りポイントを決定
   - ユーザーが「完了」「OK」「十分」などと言うまで継続

3. **Specを完成させる**
   - 収集した情報を構造化
   - `~/.config/claude/plans/YYYY-MM-DD-[slug].md` に保存
   - 追加された情報のサマリーを報告

## 出力フォーマット

完成したspecは以下の構造で書き出す:

```markdown
# [機能名]

## 概要
[1-2文で機能の目的]

## 背景・動機
[なぜこの機能が必要か]

## 要件

### 機能要件
- [ ] 要件1
- [ ] 要件2

### 非機能要件
- パフォーマンス: [要件]
- セキュリティ: [要件]

## 技術設計

### アーキテクチャ
[設計の概要]

### データフロー
[入力→処理→出力の流れ]

### インターフェース
[API、UIなど]

## エッジケース・例外処理
- ケース1: [対応方法]

## 決定事項
| 項目 | 決定 | 理由 |
|------|------|------|

## 未決定・要検討
- [ ] 検討事項1

## 実装ステップ
1. ステップ1
2. ステップ2
```

## 注意事項

- インタビュー中はTodoWriteで進捗を追跡
- 完了後、新しいセッションでspecを実行することを推奨
- 実装時は `@~/.config/claude/plans/YYYY-MM-DD-xxx.md` で参照可能
